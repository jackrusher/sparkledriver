<!DOCTYPE html PUBLIC ""
    "">
<html><head><meta charset="UTF-8" /><title>Introduction to sparkledriver</title><link rel="stylesheet" type="text/css" href="css/default.css" /><link rel="stylesheet" type="text/css" href="highlight/solarized-light.css" /><script type="text/javascript" src="highlight/highlight.min.js"></script><script type="text/javascript" src="js/jquery.min.js"></script><script type="text/javascript" src="js/page_effects.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a> with <a href="https://github.com/xsc/codox-theme-rdash">RDash UI</a> theme</h2><h1><a href="index.html"><span class="project-title"><span class="project-name">sparkledriver</span> <span class="project-version">0.2.3</span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Topics</span></h3><ul><li class="depth-1  current"><a href="intro.html"><div class="inner"><span>Introduction to sparkledriver</span></div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>sparkledriver</span></div></div></li><li class="depth-2 branch"><a href="sparkledriver.browser.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>browser</span></div></a></li><li class="depth-2 branch"><a href="sparkledriver.cookies.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>cookies</span></div></a></li><li class="depth-2 branch"><a href="sparkledriver.element.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>element</span></div></a></li><li class="depth-2"><a href="sparkledriver.retry.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>retry</span></div></a></li></ul></div><div class="document" id="content"><div class="doc"><div class="markdown"><h1><a href="#introduction-to-sparkledriver" name="introduction-to-sparkledriver"></a>Introduction to sparkledriver</h1>
<p>Sparkledriver is a mostly idiomatic wrapper around <a href="https://github.com/MachinePublishers/jBrowserDriver">jBrowserDriver</a>, which is a pure-Java <a href="http://seleniumhq.org/">Selenium</a>-compatible interface to the <a href="https://webkit.org">WebKit</a> browser library included in recent JVM versions (&gt;=1.8) as part of <a href="http://docs.oracle.com/javase/8/javafx/get-started-tutorial/jfx-overview.htm#JFXST784">JavaFX</a>.</p>
<p>This library is useful when you need a full-featured browser with support for cookies, Javascript, and so on, with no native dependencies. Iâ€™ve found it to be a nice basis for testing web applications, scraping content from Javascript-heavy websites, automating interactions with services, and so on.</p>
<h2><a href="#quick-start" name="quick-start"></a>Quick Start</h2>
<pre><code class="clojure">[sparkledriver "0.2.0"]
</code></pre>
<p>This example fetches the Clojure homepage, extracts some elements and retrieves the text of one:</p>
<pre><code class="clojure">(require '[sparkledriver.browser :refer [with-browser make-browser fetch!]])
(require '[sparkledriver.element :refer [find-by-xpath* text]])

(with-browser [browser (make-browser)]
  (-&gt; (fetch! browser "http://clojure.org")
      (find-by-xpath* "//div[@class='clj-intro-message']/p")
      (nth 2)
      text))
;;=&gt; "I hope you find Clojure's combination of facilities elegant, powerful, practical and fun to use."
</code></pre>
<h3><a href="#laziness-and-resource-management" name="laziness-and-resource-management"></a>Laziness and resource management</h3>
<p>Note that we cannot return a lazy collection of elements from inside the <code>with-browser</code> macro, as the underlying browser will no longer exist by the time the collection is realized. So, for example, if we were to modify the above example to look like this:</p>
<pre><code class="clojure">(with-browser [browser (make-browser)]
  (-&gt; (fetch! browser "http://clojure.org")
      (find-by-xpath* "//div[@class='clj-intro-message']/p")))
;;=&gt; "I hope you find Clojure's combination of facilities elegant, powerful, practical and fun to use."
</code></pre>
<p>The elements returned by <code>find-by-xpath</code> would be inaccessible outside of the <code>with-browser</code> macro.</p></div></div></div></body></html>